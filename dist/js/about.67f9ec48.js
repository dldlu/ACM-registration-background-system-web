"use strict";(self["webpackChunksys_web"]=self["webpackChunksys_web"]||[]).push([[443],{9176:function(e,t,l){l.r(t),l.d(t,{default:function(){return v}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{type:"warning",plain:"",icon:"el-icon-download",size:"mini",disabled:e.multiple},on:{click:e.handleExport}},[e._v("导出")])],1),t("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}}),t("el-col",{attrs:{span:1.5}},[t("el-cascader",{staticClass:"el-input",attrs:{props:{expandTrigger:"hover"},options:e.options,placeholder:"默认显示为本学期"},on:{change:e.handleYearFilter}})],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.infoList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{label:"序号",align:"center",prop:"id"}}),t("el-table-column",{attrs:{label:"性别",align:"center",prop:"sex"}}),t("el-table-column",{attrs:{label:"专业班级",align:"center",prop:"major_class"}}),t("el-table-column",{attrs:{label:"姓名",align:"center",prop:"student_name"}}),t("el-table-column",{attrs:{label:"学号",align:"center",prop:"student_number"}}),t("el-table-column",{attrs:{label:"手机号",align:"center",prop:"phone"}}),t("el-table-column",{attrs:{label:"QQ",align:"center",prop:"qq"}}),t("el-table-column",{attrs:{label:"报名年份",align:"center",prop:"year"}}),t("el-table-column",{attrs:{label:"邮箱",align:"center",prop:"email"}}),t("el-table-column",{attrs:{label:"提交时间",align:"center",prop:"sign_time"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",[e._v(e._s(e.parseTime(l.row.sign_time,"{y}.{m}.{d}")))])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["hr:info:edit"],expression:"['hr:info:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(l.row)}}},[e._v("修改")])]}}])})],1),t("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"学号",prop:"student_number"}},[t("el-input",{attrs:{placeholder:"请输入学号"},model:{value:e.form.student_number,callback:function(t){e.$set(e.form,"student_number",t)},expression:"form.student_number"}})],1),t("el-form-item",{attrs:{label:"姓名",prop:"student_name"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.student_name,callback:function(t){e.$set(e.form,"student_name",t)},expression:"form.student_name"}})],1),t("el-form-item",{attrs:{label:"专业班级",prop:"major_class"}},[t("el-input",{attrs:{placeholder:"请输入专业班级"},model:{value:e.form.major_class,callback:function(t){e.$set(e.form,"major_class",t)},expression:"form.major_class"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("span",[t("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[t("el-radio",{attrs:{label:"男"}},[e._v("男")]),t("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1)]),t("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[t("el-input",{attrs:{placeholder:"请输入QQ"},model:{value:e.form.qq,callback:function(t){e.$set(e.form,"qq",t)},expression:"form.qq"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("el-form-item",{attrs:{label:"报名年份",prop:"year"}},[t("el-select",{attrs:{placeholder:"请输入报名年份",size:"mini"},on:{change:e.handleChange},model:{value:e.form.year,callback:function(t){e.$set(e.form,"year",t)},expression:"form.year"}},e._l(e.yearOptions,(function(e){return t("el-option",{key:e,attrs:{value:e}})})),1)],1),t("el-form-item",{attrs:{label:"提交时间",prop:"sign_time"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择提交时间"},model:{value:e.form.sign_time,callback:function(t){e.$set(e.form,"sign_time",t)},expression:"form.sign_time"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},r=[],n=l(899);function i(e){return(0,n.ZP)({url:`/info/applicants/${e.pageSize}/${e.pageNum}`,method:"get"})}function s(e){return(0,n.ZP)({url:"/info/applicant/"+e,method:"get"})}function o(e){return(0,n.ZP)({url:"/info/applicant",method:"post",data:e})}function u(e){return(0,n.ZP)({url:"/info/applicant",method:"put",data:e})}function m(e){return(0,n.ZP)({url:"/info/applicant",method:"delete",data:e})}function c(e,t,l){return(0,n.ZP)({url:`/info/applicant/${e}/${t}/${l.pageSize}/${l.pageNum}`,method:"post"})}function d(e){return(0,n.ZP)({url:"/file/export",method:"post",data:e})}var p=l(2382);let h=(new Date).getFullYear();var f={name:"info",data(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:5,infoList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:999,id:null},form:{},selectedYear:"",yearOptions:[h-3,h-2,h-1,h],options:[{value:h,label:h,children:[{value:1,label:"上半学期"},{value:2,label:"下半学期"},{value:-1,label:"整学年"}]},{value:h-1,label:h-1,children:[{value:1,label:"上半学期"},{value:2,label:"下半学期"},{value:-1,label:"整学年"}]},{value:h-2,label:h-2,children:[{value:1,label:"上半学期"},{value:2,label:"下半学期"},{value:-1,label:"整学年"}]},{value:h-3,label:h-3,children:[{value:1,label:"上半学期"},{value:2,label:"下半学期"},{value:-1,label:"整学年"}]},{value:0,label:"全部数据"}],rules:{student_number:[{required:!0,message:"学号不能为空",trigger:"blur"}],student_name:[{required:!0,message:"姓名不能为空",trigger:"blur"}],major_class:[{required:!0,message:"专业班级不能为空",trigger:"blur"}],sex:[{validator:(e,t,l)=>{t?l():l(new Error("请选择性别"))},trigger:"blur"}],qq:[{required:!0,message:"QQ不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:["blur","change"]}],year:[{required:!0,message:"报名年份不能为空",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"},{len:11,message:"手机号格式错误",trigger:"blur"}],sign_time:[{required:!0,message:"提交时间不能为空",trigger:"blur"}]}}},created(){this.getList()},methods:{parseTime:p.TD,getList(){this.loading=!1;let e=(new Date).getMonth()<7?1:2;c(h,e,this.queryParams).then((e=>{1e4===e.status_code&&(this.infoList=e.data.array,this.total=e.data.item_total,this.loading=!1)}))},cancel(){this.open=!1,this.reset()},reset(){this.form={id:null,student_number:null,student_name:null,major_class:null,sex:null,qq:null,phone:null,email:null,year:null,last_ip:null,sign_time:null,status:null},this.resetForm("form")},resetQuery(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange(e){this.ids=e.map((e=>e.id)),this.single=1!==e.length,this.multiple=!e.length},handleAdd(){this.reset(),this.open=!0,this.title="添加报名信息"},handleUpdate(e){this.reset();const t=e.id;s(t).then((e=>{this.form=e.data,this.open=!0,this.title="修改学生信息"}))},submitForm(){this.$refs["form"].validate((e=>{e&&(this.form.sign_time=new Date(this.form.sign_time+"T00:00:00Z"),null!=this.form.id?this.form.sign_time=u(this.form).then((()=>{this.$modal.msgSuccess("修改成功"),this.open=!1,this.getList()})):o(this.form).then((()=>{this.$modal.msgSuccess("新增成功"),this.open=!1,this.getList()})))}))},handleDelete(){const e=this.ids;this.$modal.confirm("是否确认删除").then((function(){return m({ids:e})})).then((()=>{this.getList(),this.$modal.msgSuccess("删除成功")})).catch((()=>{}))},handleExport(){const e=this.ids;d({ids:e}).then((e=>{1e4===e.status_code&&this.download("/file/export",`info_${(0,p.TD)((new Date).getTime(),"{y}.{m}.{d}")}.xlsx`)}))},handleYearFilter(e){0==e[0]&&"undefined"==typeof e[1]?(this.loading=!1,i(this.queryParams).then((e=>{1e4===e.status_code&&(this.infoList=e.data.array,this.total=e.data.item_total,this.loading=!1)}))):c(e[0],e[1],this.queryParams).then((e=>{1e4===e.status_code&&(this.infoList=e.data.array,this.total=e.data.item_total,this.loading=!1)}))},changeSignTime(e){this.$forceUpdate(),this.form.sign_time=e}}},g=f,b=l(1001),_=(0,b.Z)(g,a,r,!1,null,null,null),v=_.exports}}]);
//# sourceMappingURL=about.67f9ec48.js.map